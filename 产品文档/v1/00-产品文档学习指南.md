# V1 产品文档学习指南

**版本**：v1.0.0  
**创建时间**：2025-01-XX  
**目的**：帮助快速掌握 V1 产品文档，能够清晰地向他人讲解产品

---

## 📚 文档学习路径

### 推荐阅读顺序（3 个层次）

#### 🎯 第一层：快速了解（30 分钟）
**目标**：能够用 3 分钟说清楚产品是什么

1. **[01-产品概述](./01-产品概述.md)** ⭐⭐⭐
   - **必读章节**：1. 产品一句话描述、4. 核心价值主张、5. V1 MVP 范围
   - **快速记忆点**：
     - 一句话：用户可以创建并选择不同的 AI NPC，与其在聊天窗口中对话
     - 核心价值：个性化体验、持续记忆、灵活定制、数据永久保留
     - V1 范围：用户认证、NPC 管理、一对一对话、对话历史

2. **[08-产品承诺与原则](./08-产品承诺与原则.md)** ⭐⭐
   - **必读章节**：1. 产品核心承诺
   - **快速记忆点**：
     - 数据永久保留（除非用户主动删除）
     - Agent 持续优化（随着技术发展持续优化）

#### 🔍 第二层：深入理解（2-3 小时）
**目标**：能够详细讲解每个功能模块和技术实现

3. **[02-用户场景与用例](./02-用户场景与用例.md)** ⭐⭐⭐
   - **必读章节**：全部
   - **关键场景**：
     - 场景 A：创建 NPC（填写表单 → 创建 Agent）
     - 场景 B：选择 NPC 进行一对一对话（对话页面交互）
     - 场景 C：对话历史永久保存（事件记录系统）
   - **记忆技巧**：记住 3 个核心场景，其他都是围绕这 3 个场景的细节

4. **[03-功能需求](./03-功能需求.md)** ⭐⭐⭐
   - **必读章节**：1. 功能需求总览、各功能模块的"功能描述"和"功能流程"
   - **功能模块记忆**：
     - **用户认证**：F0 登录、F0.1 注册
     - **NPC 管理**：F1 创建、F2 列表、F2.1 详情
     - **对话系统**：F5 发送消息、F6 获取历史、F6.1 会话列表
     - **事件系统**：F8 事件记录、F9 事件查询
   - **记忆技巧**：按模块记忆，每个模块 2-3 个功能

5. **[05-数据模型](./05-数据模型.md)** ⭐⭐
   - **必读章节**：1. 数据模型总览、各表的"表结构"和"字段说明"
   - **核心表记忆**：
     - `users`：用户信息
     - `agents`：NPC 配置（人设、模型）
     - `sessions`：会话（用户与 Agent 的对话会话）
     - `events`：事件（每条消息都是一个事件）
   - **关系记忆**：User → Session → Event（一个用户有多个会话，一个会话有多个事件）

6. **[04-API设计](./04-API设计.md)** ⭐⭐
   - **必读章节**：1. API 总览、各 API 的"接口说明"和"请求/响应示例"
   - **API 分组记忆**：
     - `/api/v1/users/*`：用户认证（登录、注册）
     - `/api/v1/agents/*`：NPC 管理（创建、列表、详情）
     - `/api/v1/messages/*`：发送消息
     - `/api/v1/history/*`：获取历史（会话列表、事件列表）
   - **记忆技巧**：按功能模块分组记忆，每个模块 2-4 个接口

#### 🏗️ 第三层：技术细节（按需查阅）
**目标**：能够回答技术实现细节问题

7. **[06-系统架构](./06-系统架构.md)** ⭐
   - **必读章节**：1. 架构总览、2. 系统架构图、3. 前后端架构
   - **技术栈记忆**：
     - 前端：React + Vite + Ant Design
     - 后端：Node.js + Express.js + MySQL
     - 部署：Docker + Nginx
   - **架构记忆**：浏览器 → Nginx → 前端容器/后端容器 → MySQL → OpenRouter

8. **[07-开发设计思想](./07-开发设计思想.md)** ⭐
   - **必读章节**：1. 前后端分开开发的设计思想
   - **核心思想**：前后端可以独立开发和测试，通过 API 接口交互

---

## 🎯 文档核心要点速查

### 产品定义（一句话）
> 用户可以创建并选择不同的 AI NPC（AI 小人），与其在一个聊天窗口中对话。所有 NPC 均基于 LLM 能力，拥有独立的人设与对话历史。

### 核心价值（5 点）
1. **个性化体验**：每个 NPC 拥有独特的人设和对话风格
2. **持续记忆**：所有对话历史永久保存，NPC 能够基于历史上下文对话
3. **灵活定制**：用户可以自由创建、配置不同功能的 NPC
4. **数据安全**：永久保留用户数据，除非用户主动删除
5. **持续优化**：随着技术发展，持续优化已有 Agent 的能力和体验

### 核心功能（4 大模块）

#### 1. 用户认证
- **功能**：用户登录、用户注册
- **API**：`POST /api/v1/users/login`、`POST /api/v1/users/register`
- **数据表**：`users`

#### 2. NPC 管理
- **功能**：创建 NPC、NPC 列表、获取 NPC 详情
- **API**：`POST /api/v1/agents`、`GET /api/v1/agents`、`GET /api/v1/agents/:id`
- **数据表**：`agents`
- **关键字段**：`name`（名称）、`systemPrompt`（人设）、`model`（模型）、`provider`（提供商）

#### 3. 对话系统
- **功能**：发送消息、获取对话历史、获取会话列表
- **API**：`POST /api/v1/messages`、`GET /api/v1/history`、`GET /api/v1/sessions`
- **数据表**：`sessions`（会话）、`events`（事件/消息）
- **核心流程**：
  1. 用户发送消息 → 写入 Event（用户）
  2. 读取 NPC 配置和最近 N 条历史
  3. 构建 Prompt → 调用 LLM API
  4. 写入 Event（NPC）→ 返回回复

#### 4. 事件系统
- **功能**：事件记录、事件查询
- **数据表**：`events`
- **关键字段**：`sessionId`（会话 ID）、`from`（发送者：user/agent）、`fromId`（发送者 ID）、`content`（内容）、`timestamp`（时间戳）

### 数据模型（4 张核心表）

| 表名 | 用途 | 关键字段 |
|------|------|----------|
| `users` | 用户信息 | `id`、`username`、`password`（加密） |
| `agents` | NPC 配置 | `id`、`userId`、`name`、`systemPrompt`、`model`、`provider` |
| `sessions` | 会话 | `id`、`userId`、`agentId` |
| `events` | 事件/消息 | `id`、`sessionId`、`from`、`fromId`、`content`、`timestamp` |

**关系**：User → Session → Event（一对多关系）

### 技术架构（3 层）

```
浏览器（React）
  ↓ HTTP/HTTPS
Nginx（反向代理）
  ↓
前端容器（React SPA） + 后端容器（Express.js）
  ↓
MySQL（数据存储）
  ↓
OpenRouter（LLM API）
```

---

## 📖 文档关系图

```
01-产品概述
  ├─→ 02-用户场景与用例（场景说明）
  ├─→ 03-功能需求（功能实现）
  │     ├─→ 04-API设计（接口定义）
  │     └─→ 05-数据模型（数据结构）
  └─→ 06-系统架构（技术实现）
        └─→ 07-开发设计思想（设计理念）
        
08-产品承诺与原则（贯穿所有文档）
```

**理解顺序**：
1. 先看"是什么"（01、08）
2. 再看"做什么"（02、03）
3. 再看"怎么做"（04、05、06、07）

---

## 🎤 讲解产品时的表达框架

### 3 分钟版本（面向非技术人员）

**开场**：这是一个 AI NPC 对话平台

**核心功能**：
1. **创建 NPC**：用户可以创建不同风格的 AI NPC，比如学习教练、心理导师等
2. **一对一对话**：用户可以选择一个 NPC，在聊天窗口中与其对话
3. **永久记忆**：所有对话历史都会永久保存，NPC 能够基于历史上下文对话

**核心价值**：
- 个性化：每个 NPC 有独特的人设和对话风格
- 灵活：用户可以自由创建和配置 NPC
- 安全：数据永久保留，除非用户主动删除

**技术亮点**：
- 前后端分开开发，便于维护和扩展
- 基于事件记录系统，为未来功能扩展预留接口

### 10 分钟版本（面向技术人员）

**产品定义**：
- 用户可以创建并选择不同的 AI NPC，与其在聊天窗口中对话
- 所有 NPC 均基于 LLM 能力，拥有独立的人设与对话历史

**功能模块**：
1. **用户认证**：登录、注册
2. **NPC 管理**：创建、列表、详情
3. **对话系统**：发送消息、获取历史、会话列表
4. **事件系统**：事件记录、事件查询

**技术架构**：
- 前端：React + Vite + Ant Design
- 后端：Node.js + Express.js + MySQL
- 部署：Docker + Nginx
- LLM：OpenRouter（统一入口）

**数据模型**：
- 4 张核心表：users、agents、sessions、events
- 关系：User → Session → Event（一对多）

**核心流程**：
1. 用户发送消息 → 写入 Event（用户）
2. 读取 NPC 配置和最近 N 条历史
3. 构建 Prompt → 调用 LLM API
4. 写入 Event（NPC）→ 返回回复

**设计亮点**：
- 前后端分开开发，通过 API 接口交互
- 基于事件记录系统，便于扩展记忆和状态管理
- 为未来多 NPC 交互、记忆系统等高级功能预留接口

---

## 🔍 快速查阅指南

### 当别人问到以下问题时，应该查阅哪个文档？

| 问题类型 | 查阅文档 | 具体章节 |
|---------|---------|---------|
| "这个产品是做什么的？" | 01-产品概述 | 1. 产品一句话描述、4. 核心价值主张 |
| "用户如何使用这个产品？" | 02-用户场景与用例 | 全部场景 |
| "有哪些功能？" | 03-功能需求 | 1. 功能需求总览、各功能模块 |
| "API 接口怎么调用？" | 04-API设计 | 各 API 的接口说明和示例 |
| "数据是怎么存储的？" | 05-数据模型 | 1. 数据模型总览、各表结构 |
| "技术架构是怎样的？" | 06-系统架构 | 1. 架构总览、2. 系统架构图 |
| "为什么这样设计？" | 07-开发设计思想 | 1. 前后端分开开发的设计思想 |
| "产品有什么承诺？" | 08-产品承诺与原则 | 1. 产品核心承诺 |

---

## ✅ 掌握程度自检清单

### 基础掌握（能够回答以下问题）

- [ ] 能够用一句话说清楚产品是什么
- [ ] 能够说出 3 个核心价值点
- [ ] 能够说出 4 大功能模块
- [ ] 能够说出 4 张核心数据表
- [ ] 能够说出技术栈（前端、后端、数据库、部署）

### 深入掌握（能够回答以下问题）

- [ ] 能够详细讲解每个功能模块的流程
- [ ] 能够说出每个 API 接口的用途和参数
- [ ] 能够解释数据表之间的关系
- [ ] 能够画出系统架构图
- [ ] 能够解释前后端分开开发的设计思想

### 精通掌握（能够回答以下问题）

- [ ] 能够回答任何技术实现细节问题
- [ ] 能够解释每个设计决策的原因
- [ ] 能够提出改进建议和未来规划
- [ ] 能够向不同背景的人讲解产品（技术人员、产品经理、用户）

---

## 💡 学习建议

### 第一次学习（建议 3-4 小时）

1. **快速浏览**（30 分钟）
   - 按照"第一层：快速了解"的顺序阅读
   - 重点关注"文档核心要点速查"部分
   - 目标是能够用 3 分钟说清楚产品

2. **深入阅读**（2-3 小时）
   - 按照"第二层：深入理解"的顺序阅读
   - 边读边做笔记，记录关键点
   - 目标是能够详细讲解每个功能模块

3. **实践验证**（30 分钟）
   - 对照"掌握程度自检清单"检查
   - 尝试用"讲解产品时的表达框架"向自己讲解
   - 找出不熟悉的部分，重新查阅相关文档

### 日常查阅（按需）

- 使用"快速查阅指南"快速定位问题对应的文档
- 使用"文档核心要点速查"快速回忆关键信息
- 使用"文档关系图"理解文档之间的关联

### 讲解准备（每次讲解前 10 分钟）

1. 根据听众背景选择"3 分钟版本"或"10 分钟版本"
2. 准备 2-3 个具体的使用场景示例
3. 准备回答常见问题（参考"快速查阅指南"）

---

## 📝 学习笔记模板

建议在学习过程中记录以下内容：

### 产品定义
- 一句话描述：
- 核心价值：
- 目标用户：

### 功能模块
- 模块 1：
  - 功能：
  - API：
  - 数据表：
- 模块 2：
  - ...

### 技术架构
- 前端技术栈：
- 后端技术栈：
- 部署方式：
- 数据存储：

### 核心流程
- 创建 NPC 流程：
- 对话流程：
- 获取历史流程：

### 常见问题
- Q: ...
- A: ...

---

## 🎯 总结

**掌握产品文档的关键**：
1. **先整体后细节**：先了解产品是什么，再深入功能和技术细节
2. **按模块记忆**：按功能模块组织记忆，每个模块 2-3 个关键点
3. **理解关系**：理解文档之间的关系，数据表之间的关系
4. **实践讲解**：通过向他人讲解来检验掌握程度
5. **持续查阅**：遇到问题时快速查阅相关文档

**记住**：文档是工具，不是负担。重点是理解产品的核心逻辑，而不是记住所有细节。细节可以随时查阅文档。

---

**最后更新**：2025-01-XX  
**维护者**：产品团队

