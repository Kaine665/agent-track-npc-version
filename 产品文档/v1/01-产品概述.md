# 01-产品概述（V1）

**文档版本**：v1.0.0  
**最后更新**：2025-11-22  
**相关文档**：[功能需求](./03-功能需求.md) | [API设计](./04-API设计.md) | [数据模型](./05-数据模型.md)

---

## 1. 产品一句话描述

用户可以创建并选择不同的 AI NPC（AI 小人），与其在一个聊天窗口中对话。所有 NPC 均基于 LLM 能力，拥有独立的人设与对话历史。

---

## 2. 产品愿景

### 2.1 长期愿景

打造一个沉浸式的 AI NPC 交互平台，让用户能够与多个具有独特人设和记忆的 AI 角色进行深度对话，满足学习、陪伴、娱乐等多种需求。

### 2.2 V1 版本目标

- **核心目标**：验证 AI NPC 一对一对话的核心价值
- **用户目标**：让用户能够快速创建和使用个性化的 AI NPC
- **技术目标**：建立稳定、可扩展的对话系统基础架构
- **设计目标**：验证前后端分开开发的设计思想

---

## 3. 目标用户画像

### 3.1 主要用户群体

**V1 版本的主要用户群体：我的朋友**

V1 版本主要面向朋友群体，用于验证 AI NPC 一对一对话的核心价值。这是一个小范围的测试版本，通过朋友的使用反馈来验证产品概念和用户体验。

### 3.2 用户特征

- **技术能力**：中等（能够使用 Web 应用）
- **使用频率**：高频（每日或每周多次）
- **使用场景**：学习指导、情感陪伴、日常聊天、信息查询
- **设备环境**：主要使用 PC 和移动端浏览器

---

## 4. 核心价值主张

### 4.1 对用户的价值

1. **个性化体验**：每个 NPC 拥有独特的人设和对话风格
2. **持续记忆**：所有对话历史永久保存，NPC 能够基于历史上下文对话
3. **灵活定制**：用户可以自由创建、配置不同功能的 NPC
4. **简单易用**：界面简洁直观，无需复杂配置即可使用
5. **数据安全**：永久保留用户数据，除非用户主动删除
6. **持续优化**：随着技术发展，持续优化已有 Agent 的能力和体验

### 4.2 差异化优势

- **独立人设**：每个 NPC 拥有独立的 system prompt 和对话历史
- **模型可选**：用户可以为不同 NPC 选择不同的 LLM 模型
- **事件驱动**：基于事件记录系统，便于未来扩展记忆和状态管理
- **架构可扩展**：为未来多 NPC 交互、记忆系统等高级功能预留接口
- **数据永久保留**：承诺永久保留用户数据，除非用户主动删除
- **持续优化**：承诺随着公司和技术发展，持续优化已有 Agent

### 4.3 产品核心承诺

#### 4.3.1 数据永久保留承诺

**承诺内容**：
- **永久保留用户数据**：所有用户创建的 NPC、对话历史、会话记录等数据将永久保留
- **用户主动删除**：只有在用户主动删除的情况下，才会删除相关数据
- **数据安全**：采用可靠的数据存储和备份机制，确保数据安全不丢失
- **数据迁移**：如果系统升级或迁移，确保数据完整迁移，不丢失任何数据

**实现方式**：
- 使用可靠的数据库存储（MySQL）
- 定期数据备份
- 数据迁移时保证完整性
- 提供数据导出功能（未来版本）

#### 4.3.2 Agent 持续优化承诺

**承诺内容**：
- **持续优化已有 Agent**：随着公司和技术的发展，持续优化用户已创建的 Agent
- **向后兼容**：优化过程中保证向后兼容，不影响现有功能
- **能力提升**：通过模型升级、Prompt 优化、功能增强等方式，不断提升 Agent 的能力
- **用户体验**：优化过程中注重用户体验，确保优化后的 Agent 更易用、更智能

**实现方式**：
- 定期评估和优化 Agent 的 system prompt
- 支持模型升级（用户可选择是否升级）
- 持续改进对话质量和上下文理解能力
- 收集用户反馈，针对性优化

---

## 5. V1 MVP 范围

### 5.1 包含功能（Must Have）

#### ✅ NPC 管理功能
- 创建 NPC（名称、类型、人设、模型、头像）
- NPC 列表展示
- 获取 NPC 详情
- 选择 NPC 进入对话

#### ✅ 对话功能
- 用户与 NPC 一对一对话
- 异步消息发送和接收（短轮询）
- 对话历史展示
- 基于历史上下文的对话

#### ✅ 用户认证
- 用户登录
- 用户注册
- 基础的用户数据隔离

#### ✅ 数据存储
- NPC 配置持久化存储（MySQL）
- 对话事件永久记录（MySQL）
- 用户数据隔离

#### ✅ 基础 UI
- NPC 列表页面
- 对话页面（聊天界面）
- 创建 NPC 表单
- 注册页面
- 移动端自适应

#### ✅ 增强功能
- Markdown 渲染（代码高亮、表格等）
- AgentList 自动刷新
- 多 LLM 提供商支持（OpenAI、DeepSeek、OpenRouter）
- 多 API Key 故障转移

### 5.2 不包含功能（未来版本）

#### ❌ V1 不包含
- NPC 编辑功能（V2 考虑）
- NPC 删除功能（V2 考虑）
- NPC 互相对话（V3 考虑）
- 多 NPC 世界场景（V3 考虑）
- 中期/长期记忆系统（V2 考虑）
- 工具调用能力（搜索、知识库等）（V2 考虑）
- 多 Agent 调度系统（V3 考虑）
- 事件总线架构（V3 考虑）
- 场景地图可视化（V3 考虑）
- 数据导出功能（V2 考虑）
- 对话搜索功能（V2 考虑）

### 5.3 功能优先级

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 创建 NPC | P0 | 核心功能，必须实现 ✅ |
| NPC 列表 | P0 | 核心功能，必须实现 ✅ |
| 一对一对话 | P0 | 核心功能，必须实现 ✅ |
| 对话历史记录 | P0 | 核心功能，必须实现 ✅ |
| 历史记录展示 | P0 | 核心功能，必须实现 ✅ |
| 用户认证 | P0 | 核心功能，必须实现 ✅ |
| Markdown 渲染 | P1 | 增强体验 ✅ |
| 移动端自适应 | P1 | 增强体验 ✅ |
| NPC 编辑 | P2 | V2 版本实现 |
| NPC 删除 | P2 | V2 版本实现 |
| 对话搜索 | P1 | V2 版本实现 |

---

## 6. 产品边界

### 6.1 功能边界

- **单用户单 NPC**：V1 只支持一个用户与一个 NPC 的对话
- **文本对话**：V1 只支持文本消息，不支持图片、语音、文件等
- **异步模式**：对话为异步模式，使用短轮询检查新消息（不要求实时响应）
- **无多端同步**：V1 不要求多设备实时同步（数据持久化即可）

### 6.2 技术边界

- **基础用户认证**：V1 实现基础的登录/注册，使用 userId 进行数据隔离
- **无权限管理**：V1 不实现复杂的权限和角色管理
- **无支付系统**：V1 不涉及付费功能
- **无第三方集成**：V1 不集成外部服务（除 LLM API）

### 6.3 数据边界

- **单租户数据**：V1 数据按 userId 隔离，不涉及多租户
- **无数据导出**：V1 不提供数据导出功能
- **无数据分析**：V1 不提供使用数据分析和统计功能

---

## 7. 成功指标（Success Metrics）

### 7.1 用户指标

- **NPC 创建数量**：平均每个用户创建 NPC 数量 ≥ 2
- **对话活跃度**：日活跃用户中，有对话行为的用户占比 ≥ 60%
- **对话深度**：平均每次对话轮数 ≥ 5 轮
- **用户留存**：7 日留存率 ≥ 30%

### 7.2 技术指标

- **对话响应时间**：P95 响应时间 < 3 秒
- **系统可用性**：系统可用性 ≥ 99%
- **数据完整性**：对话事件丢失率 < 0.1%
- **API 成功率**：API 调用成功率 ≥ 99.5%

### 7.3 体验指标

- **创建 NPC 耗时**：用户完成 NPC 创建的平均时间 < 2 分钟
- **界面易用性**：用户能够独立完成核心流程，无需帮助文档
- **错误率**：用户操作错误率 < 5%

---

## 8. 风险与约束

### 8.1 技术风险

- **LLM API 稳定性**：依赖第三方 LLM API，可能存在不稳定或限流问题
- **成本控制**：LLM API 调用成本需要控制，避免过度消耗
- **数据安全**：对话数据涉及用户隐私，需要安全存储

### 8.2 产品风险

- **用户期望管理**：用户可能对 AI 对话质量有较高期望
- **使用场景不明确**：需要验证用户真实使用场景和需求

### 8.3 约束条件

- **开发资源**：团队规模和开发时间有限
- **技术栈**：需要选择成熟稳定的技术栈
- **合规要求**：需要遵守数据保护和隐私相关法规

---

## 9. 相关文档

- [功能需求](./03-功能需求.md) - 详细功能需求说明
- [API设计](./04-API设计.md) - API 接口设计
- [数据模型](./05-数据模型.md) - 数据结构设计
- [用户场景与用例](./02-用户场景与用例.md) - 用户场景详细说明
- [系统架构](./06-系统架构.md) - 技术架构设计
- [开发设计思想](./07-开发设计思想.md) - 前后端分开设计思想

---

**文档维护**：本文档应与产品规划同步更新，重大变更需更新版本号。

