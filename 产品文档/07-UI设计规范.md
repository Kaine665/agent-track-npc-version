# 07-UI 设计规范

**文档版本**：v1.0  
**最后更新**：2024-12-19  
**相关文档**：[功能需求](./03-功能需求.md) | [用户场景与用例](./02-用户场景与用例.md)

---

## 1. 设计原则

### 1.1 核心原则

- **简洁直观**：界面简洁，操作直观，降低学习成本
- **一致性**：保持视觉和交互的一致性
- **响应式**：支持不同屏幕尺寸（PC、平板、手机）
- **可访问性**：考虑无障碍设计，支持键盘导航

### 1.2 设计风格

- **现代简约**：采用现代简约的设计风格
- **清晰层次**：通过颜色、间距、字体大小建立清晰的视觉层次
- **友好反馈**：操作有明确的反馈（加载、成功、错误）

---

## 2. 设计系统

### 2.1 颜色系统

#### 主色调

| 颜色 | 用途 | 色值 | 示例 |
|------|------|------|------|
| 主色 | 主要操作按钮、链接 | #1890ff | 创建按钮 |
| 成功色 | 成功提示 | #52c41a | 创建成功提示 |
| 警告色 | 警告提示 | #faad14 | 表单验证警告 |
| 错误色 | 错误提示 | #ff4d4f | 错误消息 |
| 文本主色 | 主要文本 | #262626 | 标题、正文 |
| 文本次色 | 次要文本 | #8c8c8c | 辅助信息 |
| 背景色 | 页面背景 | #fafafa | 页面背景 |
| 边框色 | 边框、分割线 | #d9d9d9 | 卡片边框 |

#### 颜色使用规范

- **主色**：用于主要操作按钮、链接、选中状态
- **成功色**：用于成功提示、完成状态
- **警告色**：用于警告提示、需要用户注意的信息
- **错误色**：用于错误提示、删除操作
- **文本色**：根据重要性使用不同深度的文本色

### 2.2 字体系统

#### 字体大小

| 级别 | 大小 | 行高 | 用途 | 示例 |
|------|------|------|------|------|
| H1 | 24px | 32px | 页面主标题 | "我的 NPC" |
| H2 | 20px | 28px | 区块标题 | "创建新 NPC" |
| H3 | 16px | 24px | 卡片标题 | NPC 名称 |
| Body | 14px | 22px | 正文 | 对话内容 |
| Small | 12px | 20px | 辅助信息 | 时间戳 |

#### 字重

- **Regular (400)**：正文、普通文本
- **Medium (500)**：强调文本、按钮文字
- **Bold (700)**：标题、重要信息

### 2.3 间距系统

| 级别 | 大小 | 用途 |
|------|------|------|
| XS | 4px | 紧密元素间距 |
| SM | 8px | 相关元素间距 |
| MD | 16px | 常规元素间距 |
| LG | 24px | 区块间距 |
| XL | 32px | 大区块间距 |
| XXL | 48px | 页面边距 |

### 2.4 圆角系统

| 级别 | 大小 | 用途 |
|------|------|------|
| Small | 4px | 小按钮、标签 |
| Medium | 8px | 卡片、输入框 |
| Large | 12px | 大卡片、对话框 |

### 2.5 阴影系统

| 级别 | 阴影 | 用途 |
|------|------|------|
| Small | 0 1px 2px rgba(0,0,0,0.05) | 卡片悬停 |
| Medium | 0 2px 8px rgba(0,0,0,0.1) | 卡片默认 |
| Large | 0 4px 16px rgba(0,0,0,0.15) | 对话框、下拉菜单 |

---

## 3. 页面设计

### 3.1 NPC 列表页面

#### 3.1.1 布局结构

```
┌─────────────────────────────────────────┐
│  顶部导航栏                              │
│  [Logo] 我的 NPC              [用户信息] │
├─────────────────────────────────────────┤
│                                          │
│  ┌──────────┐  ┌──────────┐  ┌────────┐│
│  │ NPC 卡片 │  │ NPC 卡片 │  │ + 创建 ││
│  │          │  │          │  │        ││
│  │ [头像]   │  │ [头像]   │  │        ││
│  │ 学习教练 │  │ 心理导师 │  │        ││
│  │ 特定类型 │  │ 特定类型 │  │        ││
│  │ 2小时前  │  │ 1天前    │  │        ││
│  └──────────┘  └──────────┘  └────────┘│
│                                          │
└─────────────────────────────────────────┘
```

#### 3.1.2 组件设计

**NPC 卡片**

- **尺寸**：宽度自适应（响应式），高度固定
- **内容**：
  - 头像（圆形，80px × 80px）
  - 名称（H3，粗体）
  - 类型标签（小标签，"通用"或"特定"）
  - 最后对话时间（Small，相对时间）
- **交互**：
  - 默认：中等阴影
  - 悬停：阴影加深，轻微上移
  - 点击：跳转到对话页面

**创建按钮卡片**

- **样式**：虚线边框，居中显示 "+" 图标
- **交互**：点击跳转到创建 NPC 页面

#### 3.1.3 空状态

- **图标**：大图标（如机器人图标）
- **文字**："创建你的第一个 NPC"
- **按钮**："创建新 NPC" 按钮

#### 3.1.4 响应式设计

- **PC（≥1200px）**：每行 4 个卡片
- **平板（768px-1199px）**：每行 2-3 个卡片
- **手机（<768px）**：每行 1 个卡片

---

### 3.2 创建 NPC 页面

#### 3.2.1 布局结构

```
┌─────────────────────────────────────────┐
│  顶部导航栏                              │
│  [←] 返回列表                             │
├─────────────────────────────────────────┤
│                                          │
│  ┌────────────────────────────────────┐ │
│  │  创建新 NPC                        │ │
│  │                                    │ │
│  │  名称 *                            │ │
│  │  [输入框________________]          │ │
│  │                                    │ │
│  │  类型 *                            │ │
│  │  ( ) 通用  ( ) 特定                │ │
│  │                                    │ │
│  │  人设描述 *                        │ │
│  │  [多行输入框________________]      │ │
│  │  [________________]                │ │
│  │                                    │ │
│  │  使用模型 *                        │ │
│  │  [下拉选择框▼]                    │ │
│  │                                    │ │
│  │  头像（可选）                      │ │
│  │  [输入 URL] 或 [上传图片]          │ │
│  │                                    │ │
│  │  [取消]  [创建]                    │ │
│  └────────────────────────────────────┘ │
│                                          │
└─────────────────────────────────────────┘
```

#### 3.2.2 表单设计

**输入框**

- **标签**：左对齐，必填项标注 "*"
- **输入框**：
  - 高度：32px（单行），最小高度 80px（多行）
  - 边框：1px solid #d9d9d9
  - 圆角：8px
  - 内边距：8px 12px
- **占位符**：浅灰色文字，提示输入格式
- **错误状态**：红色边框，下方显示错误信息

**单选按钮组**

- **布局**：水平排列
- **样式**：标准单选按钮样式

**下拉选择框**

- **样式**：标准下拉选择框
- **选项**：显示模型名称和简要说明

**按钮**

- **主要按钮**（创建）：主色背景，白色文字
- **次要按钮**（取消）：白色背景，主色边框和文字
- **尺寸**：高度 32px，内边距 0 16px

#### 3.2.3 表单验证

- **实时验证**：输入时实时显示验证结果
- **提交验证**：提交时再次验证所有字段
- **错误提示**：在字段下方显示错误信息，红色文字

---

### 3.3 对话页面

#### 3.3.1 布局结构

```
┌─────────────────────────────────────────┐
│  顶部导航栏                              │
│  [←] 学习教练              [NPC 信息]   │
├─────────────────────────────────────────┤
│                                          │
│  ┌────────┐                            │
│  │ [头像] │  你好                      │
│  └────────┘                            │
│                                          │
│             你好！我是你的学习教练...   │
│             ┌────────┐                  │
│             │ [头像] │                  │
│             └────────┘                  │
│                                          │
│  ┌────────┐                            │
│  │ [头像] │  今天有什么学习建议？      │
│  └────────┘                            │
│                                          │
│             我们先从制定学习计划开始... │
│             ┌────────┐                  │
│             │ [头像] │                  │
│             └────────┘                  │
│                                          │
├─────────────────────────────────────────┤
│  [输入框________________]  [发送]      │
└─────────────────────────────────────────┘
```

#### 3.3.2 消息气泡设计

**用户消息（右侧）**

- **背景色**：主色（#1890ff）
- **文字颜色**：白色
- **对齐**：右对齐
- **圆角**：左上、右上、右下圆角（12px）
- **最大宽度**：70%（PC），85%（手机）
- **内边距**：12px 16px
- **头像**：圆形，40px × 40px，右侧显示

**NPC 消息（左侧）**

- **背景色**：白色
- **文字颜色**：文本主色（#262626）
- **对齐**：左对齐
- **圆角**：左下、左上、右上圆角（12px）
- **边框**：1px solid #d9d9d9
- **最大宽度**：70%（PC），85%（手机）
- **内边距**：12px 16px
- **头像**：圆形，40px × 40px，左侧显示

**时间戳**

- **位置**：消息下方，居中显示
- **样式**：Small 字体，文本次色（#8c8c8c）
- **格式**：相对时间（如"2 分钟前"）或绝对时间（如"14:30"）

#### 3.3.3 输入框设计

**输入框**

- **高度**：自适应（最小 40px，最大 120px）
- **多行支持**：支持多行输入，自动扩展高度
- **占位符**："输入消息..."
- **发送按钮**：
  - 位置：输入框右侧
  - 样式：主色背景，白色图标
  - 状态：禁用（消息为空时）、加载（发送中）

**快捷操作**

- **Enter**：发送消息（Shift+Enter 换行）
- **Ctrl+Enter**：发送消息（可选）

#### 3.3.4 加载状态

**发送中**

- **用户消息**：立即显示（乐观更新）
- **NPC 回复**：显示加载动画（如三个点动画）
- **输入框**：禁用，显示"发送中..."

**加载历史**

- **顶部显示**：加载动画
- **完成后**：自动滚动到底部

#### 3.3.5 空状态

- **图标**：大图标（如对话气泡图标）
- **文字**："开始你的第一次对话吧"
- **提示**：引导用户输入消息

---

## 4. 组件库

### 4.1 基础组件

#### 按钮（Button）

```typescript
interface ButtonProps {
  type: 'primary' | 'default' | 'danger';
  size: 'small' | 'medium' | 'large';
  loading?: boolean;
  disabled?: boolean;
  onClick?: () => void;
  children: React.ReactNode;
}
```

**样式变体**：
- **Primary**：主色背景，白色文字
- **Default**：白色背景，主色边框和文字
- **Danger**：错误色背景，白色文字

#### 输入框（Input）

```typescript
interface InputProps {
  type?: 'text' | 'textarea';
  placeholder?: string;
  value: string;
  onChange: (value: string) => void;
  error?: string;
  disabled?: boolean;
}
```

#### 卡片（Card）

```typescript
interface CardProps {
  hoverable?: boolean;
  onClick?: () => void;
  children: React.ReactNode;
}
```

#### 标签（Tag）

```typescript
interface TagProps {
  type?: 'default' | 'primary';
  children: React.ReactNode;
}
```

### 4.2 业务组件

#### NPC 卡片（NPCCard）

```typescript
interface NPCCardProps {
  id: string;
  name: string;
  type: 'general' | 'special';
  avatarUrl?: string;
  lastMessageAt?: number;
  onClick: () => void;
}
```

#### 消息气泡（MessageBubble）

```typescript
interface MessageBubbleProps {
  from: 'user' | 'agent';
  content: string;
  timestamp: number;
  avatarUrl?: string;
}
```

---

## 5. 交互设计

### 5.1 页面转场

- **列表 → 对话**：滑动进入（可选）
- **列表 → 创建**：淡入淡出
- **创建 → 列表**：淡入淡出

### 5.2 加载反馈

- **页面加载**：骨架屏（Skeleton Screen）
- **数据加载**：加载动画（Spinner）
- **操作反馈**：Toast 提示（成功/失败）

### 5.3 错误处理

- **表单错误**：字段下方显示错误信息
- **网络错误**：Toast 提示 + 重试按钮
- **系统错误**：错误页面或错误提示

### 5.4 空状态

- **无数据**：友好的空状态提示 + 引导操作
- **加载失败**：错误提示 + 重试按钮

---

## 6. 响应式设计

### 6.1 断点设置

| 设备 | 断点 | 布局特点 |
|------|------|---------|
| 手机 | < 768px | 单列布局，全屏显示 |
| 平板 | 768px - 1199px | 双列布局，适中间距 |
| PC | ≥ 1200px | 多列布局，宽松间距 |

### 6.2 适配策略

- **弹性布局**：使用 Flexbox 或 Grid
- **相对单位**：使用 rem、em、% 等相对单位
- **媒体查询**：根据断点调整布局和样式
- **图片适配**：使用响应式图片（srcset）

---

## 7. 无障碍设计

### 7.1 键盘导航

- **Tab**：在可交互元素间切换
- **Enter/Space**：激活按钮、链接
- **Esc**：关闭对话框、取消操作

### 7.2 屏幕阅读器支持

- **语义化 HTML**：使用正确的 HTML 标签
- **ARIA 属性**：添加必要的 ARIA 属性
- **替代文本**：为图片添加 alt 文本

### 7.3 颜色对比度

- **文本对比度**：至少 4.5:1（WCAG AA 标准）
- **非文本对比度**：至少 3:1

---

## 8. 动画设计

### 8.1 过渡动画

- **页面转场**：200-300ms 淡入淡出
- **元素出现**：200ms 淡入 + 轻微上移
- **悬停效果**：150ms 过渡

### 8.2 加载动画

- **Spinner**：旋转动画，用于数据加载
- **Skeleton**：骨架屏动画，用于内容加载
- **Typing**：打字动画，用于 NPC 回复（可选）

---

## 9. 设计资源

### 9.1 图标

- **来源**：使用图标库（如 Ant Design Icons、Material Icons）
- **风格**：统一风格，线性或填充
- **尺寸**：16px、24px、32px、48px

### 9.2 图片

- **格式**：WebP（优先）、PNG、JPG
- **尺寸**：根据使用场景优化尺寸
- **懒加载**：非首屏图片使用懒加载

---

## 10. 设计稿交付

### 10.1 设计工具

- **UI 设计**：Figma、Sketch、Adobe XD
- **原型**：Figma、Axure、墨刀

### 10.2 交付物

- **设计稿**：高保真设计稿（Figma 链接）
- **设计规范**：设计系统文档
- **切图资源**：图标、图片资源
- **交互原型**：可交互原型（可选）

---

## 11. 相关文档

- [功能需求](./03-功能需求.md) - 功能需求详细说明
- [用户场景与用例](./02-用户场景与用例.md) - 用户场景详细说明

---

**文档维护**：UI 设计变更时，需同步更新本文档和设计稿。

