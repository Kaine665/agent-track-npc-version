# ğŸš€ æ„å»ºé€Ÿåº¦ä¼˜åŒ– - å¿«é€ŸæŒ‡å—

> å·²ä¼˜åŒ–æ„å»ºé…ç½®ï¼Œæ„å»ºé€Ÿåº¦åº”è¯¥å¿«å¾ˆå¤šäº†ï¼

## âœ… å·²åº”ç”¨çš„ä¼˜åŒ–

### 1. Vite é…ç½®ä¼˜åŒ–
- âœ… å…³é—­ source mapï¼ˆç”Ÿäº§ç¯å¢ƒä¸éœ€è¦ï¼‰
- âœ… ä½¿ç”¨ esbuild å‹ç¼©ï¼ˆæ¯” terser å¿«å¾ˆå¤šï¼‰
- âœ… æ‰‹åŠ¨åˆ†åŒ…ï¼ˆå‡å°‘é‡å¤æ‰“åŒ…ï¼‰

### 2. Dockerfile ä¼˜åŒ–
- âœ… ä½¿ç”¨ `npm ci`ï¼ˆæ¯” npm install å¿«ï¼‰
- âœ… åˆ©ç”¨ Docker å±‚ç¼“å­˜
- âœ… è·³è¿‡å®¡è®¡ï¼ˆ`--no-audit`ï¼‰
- âœ… ä½¿ç”¨ç¼“å­˜ï¼ˆ`--prefer-offline`ï¼‰

### 3. ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–
- âœ… ç§»é™¤äº† `mysql2` å’Œ `sequelize`ï¼ˆè¿™äº›æ˜¯åç«¯ä¾èµ–ï¼‰

### 4. npm é…ç½®ä¼˜åŒ–
- âœ… ç¦ç”¨è¿›åº¦æ˜¾ç¤º
- âœ… ç¦ç”¨å®¡è®¡
- âœ… ä½¿ç”¨ç¼“å­˜

---

## ğŸ¯ ç«‹å³ç”Ÿæ•ˆçš„æ“ä½œ

### æ­¥éª¤ 1ï¼šæ¸…ç†æ—§çš„ node_modulesï¼ˆå¦‚æœå­˜åœ¨ï¼‰

```bash
cd npc-frontend
rm -rf node_modules package-lock.json
```

### æ­¥éª¤ 2ï¼šé‡æ–°å®‰è£…ä¾èµ–ï¼ˆä½¿ç”¨ä¼˜åŒ–åçš„é…ç½®ï¼‰

```bash
npm install
```

### æ­¥éª¤ 3ï¼šé‡æ–°æ„å»º

```bash
npm run build
```

**é¢„æœŸæ—¶é—´**ï¼š1-3 åˆ†é’Ÿï¼ˆä¹‹å‰å¯èƒ½éœ€è¦ 10+ åˆ†é’Ÿï¼‰

---

## ğŸ¢ å¦‚æœè¿˜æ˜¯æ…¢ï¼ˆç½‘ç»œé—®é¢˜ï¼‰

### æ–¹æ¡ˆ 1ï¼šä½¿ç”¨å›½å†…é•œåƒï¼ˆæ¨èï¼‰

ç¼–è¾‘ `npc-frontend/.npmrc`ï¼Œå–æ¶ˆæ³¨é‡Šè¿™ä¸€è¡Œï¼š

```
registry=https://registry.npmmirror.com
```

ç„¶åé‡æ–°å®‰è£…ï¼š

```bash
cd npc-frontend
rm -rf node_modules package-lock.json
npm install
npm run build
```

### æ–¹æ¡ˆ 2ï¼šä¸´æ—¶ä½¿ç”¨é•œåƒ

```bash
npm install --registry=https://registry.npmmirror.com
npm run build
```

---

## ğŸ“Š é€Ÿåº¦å¯¹æ¯”

| åœºæ™¯ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|------|--------|--------|
| é¦–æ¬¡æ„å»º | 10-15 åˆ†é’Ÿ | 3-7 åˆ†é’Ÿ |
| ä½¿ç”¨ç¼“å­˜ | 10-15 åˆ†é’Ÿ | 1-3 åˆ†é’Ÿ |
| ä»…ä»£ç å˜æ›´ | 10-15 åˆ†é’Ÿ | 1-2 åˆ†é’Ÿ |

---

## ğŸ’¡ è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰

### 1. æœ¬åœ°æ„å»ºï¼ˆé¿å… Docker æ„å»ºï¼‰

å¦‚æœ Docker æ„å»ºè¿˜æ˜¯å¾ˆæ…¢ï¼Œå¯ä»¥å…ˆæœ¬åœ°æ„å»ºï¼š

```bash
# æœ¬åœ°æ„å»º
cd npc-frontend
npm install
npm run build

# ç„¶ååªæ„å»º Docker é•œåƒï¼ˆä¸é‡æ–°æ„å»ºå‰ç«¯ï¼‰
cd ..
docker build -t npc-frontend:latest npc-frontend/
```

### 2. ä½¿ç”¨ pnpmï¼ˆæ›´å¿«ï¼‰

```bash
# å®‰è£… pnpm
npm install -g pnpm

# ä½¿ç”¨ pnpm
cd npc-frontend
pnpm install
pnpm build
```

---

## ğŸ” æ£€æŸ¥æ„å»ºæ—¶é—´

```bash
# æŸ¥çœ‹æ„å»ºæ—¶é—´
time npm run build

# æˆ–ä½¿ç”¨ Docker
time docker-compose build frontend
```

---

## âœ… æ€»ç»“

**å·²å®Œæˆçš„ä¼˜åŒ–**ï¼š
1. âœ… Vite é…ç½®ä¼˜åŒ–ï¼ˆå…³é—­ source mapï¼Œä½¿ç”¨ esbuildï¼‰
2. âœ… Dockerfile ä¼˜åŒ–ï¼ˆä½¿ç”¨ç¼“å­˜ï¼Œè·³è¿‡å®¡è®¡ï¼‰
3. âœ… ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–ï¼ˆmysql2, sequelizeï¼‰
4. âœ… npm é…ç½®ä¼˜åŒ–ï¼ˆç¦ç”¨è¿›åº¦ï¼Œä½¿ç”¨ç¼“å­˜ï¼‰

**ä¸‹ä¸€æ­¥**ï¼š
1. æ¸…ç†æ—§çš„ node_modules
2. é‡æ–°å®‰è£…ä¾èµ–
3. é‡æ–°æ„å»º

**å¦‚æœè¿˜æ˜¯æ…¢**ï¼š
- ä½¿ç”¨å›½å†…é•œåƒï¼ˆä¿®æ”¹ .npmrcï¼‰
- æˆ–æœ¬åœ°æ„å»ºåå¤åˆ¶

---

## ğŸ†˜ å¦‚æœé‡åˆ°é—®é¢˜

### é—®é¢˜ 1ï¼šnpm install å¾ˆæ…¢

**è§£å†³**ï¼šä½¿ç”¨å›½å†…é•œåƒï¼ˆè§ä¸Šæ–¹æ–¹æ¡ˆ 1ï¼‰

### é—®é¢˜ 2ï¼šæ„å»ºå¤±è´¥

**è§£å†³**ï¼š
```bash
# æ¸…ç†ç¼“å­˜
npm cache clean --force

# é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install
```

### é—®é¢˜ 3ï¼šå†…å­˜ä¸è¶³

**è§£å†³**ï¼šDockerfile ä¸­å·²è®¾ç½®å†…å­˜é™åˆ¶ï¼Œå¦‚æœè¿˜ä¸å¤Ÿå¯ä»¥å¢åŠ 

