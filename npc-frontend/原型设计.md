# 前端原型设计

**文档版本**：v1.0  
**创建时间**：2025-11-21  
**相关文档**：[UI 设计规范](../产品文档/07-UI设计规范.md) | [功能需求](../产品文档/03-功能需求.md)

---

## 1. 设计原则确认

基于 UI 设计规范，确认以下设计原则：

- **简洁直观**：界面简洁，操作直观
- **一致性**：保持视觉和交互的一致性
- **响应式**：支持 PC、平板、手机
- **现代简约**：采用现代简约的设计风格

---

## 2. 视觉风格确认

### 2.1 颜色系统

| 颜色     | 用途               | 色值    |
| -------- | ------------------ | ------- |
| 主色     | 主要操作按钮、链接 | #1890ff |
| 成功色   | 成功提示           | #52c41a |
| 警告色   | 警告提示           | #faad14 |
| 错误色   | 错误提示           | #ff4d4f |
| 文本主色 | 主要文本           | #262626 |
| 文本次色 | 次要文本           | #8c8c8c |
| 背景色   | 页面背景           | #fafafa |
| 边框色   | 边框、分割线       | #d9d9d9 |

### 2.2 字体系统

| 级别  | 大小 | 行高 | 用途       |
| ----- | ---- | ---- | ---------- |
| H1    | 24px | 32px | 页面主标题 |
| H2    | 20px | 28px | 区块标题   |
| H3    | 16px | 24px | 卡片标题   |
| Body  | 14px | 22px | 正文       |
| Small | 12px | 20px | 辅助信息   |

### 2.3 间距系统

| 级别 | 大小 | 用途         |
| ---- | ---- | ------------ |
| XS   | 4px  | 紧密元素间距 |
| SM   | 8px  | 相关元素间距 |
| MD   | 16px | 常规元素间距 |
| LG   | 24px | 区块间距     |
| XL   | 32px | 大区块间距   |
| XXL  | 48px | 页面边距     |

---

## 3. 页面原型设计

### 3.1 NPC 列表页面

#### 布局结构（横行布局）

```
┌─────────────────────────────────────────┐
│  顶部导航栏                              │
│  [Logo] 我的 NPC              [用户信息] │
├─────────────────────────────────────────┤
│                                          │
│  ┌────────────────────────────────────┐ │
│  │ [+ 创建新 NPC]                      │ │
│  └────────────────────────────────────┘ │
│                                          │
│  ┌────────────────────────────────────┐ │
│  │ [头像] 学习教练  特定类型  2小时前 │ │
│  │                                    │ │
│  │ 最后消息：你好，我想学习...        │ │
│  └────────────────────────────────────┘ │
│                                          │
│  ┌────────────────────────────────────┐ │
│  │ [头像] 心理导师  特定类型  1天前   │ │
│  │                                    │ │
│  │ 最后消息：今天心情怎么样？          │ │
│  └────────────────────────────────────┘ │
│                                          │
└─────────────────────────────────────────┘
```

#### 横行卡片设计

**卡片内容**（从左到右）：

- **头像**：圆形，60px × 60px，左侧显示
- **主要信息区**（中间）：
  - NPC 名称（H3，粗体）
  - 类型标签（小标签，"通用"或"特定"）
  - 最后对话时间（Small，相对时间，右对齐）
- **次要信息区**（下方）：
  - 最后消息预览（Small，文本次色，最多显示一行，超出省略）

**卡片尺寸**：

- 宽度：100%（自适应）
- 高度：固定（约 80-100px）
- 内边距：16px
- 间距：卡片之间 12px 间距

**交互**：

- 默认：浅色背景，边框
- 悬停：背景色加深，阴影加深
- 点击：整行可点击，跳转到对话页面

#### 交互流程

1. **页面加载**：

   - 显示加载状态
   - 调用 API 获取 NPC 列表
   - 显示 NPC 横行列表

2. **点击 NPC 卡片**：

   - 跳转到对话页面（`/chat/:agentId`）

3. **点击创建按钮**：

   - 跳转到创建 NPC 页面（`/agents/create`）

4. **空状态**：
   - 显示空状态提示
   - 显示"创建新 NPC"按钮

#### 响应式设计

- **PC（≥1200px）**：横行布局，卡片宽度 100%
- **平板（768px-1199px）**：横行布局，卡片宽度 100%
- **手机（<768px）**：横行布局，卡片宽度 100%，字体和间距适当缩小

---

### 3.2 创建 NPC 页面

#### 布局结构

```
┌─────────────────────────────────────────┐
│  顶部导航栏                              │
│  [←] 返回列表                             │
├─────────────────────────────────────────┤
│                                          │
│  ┌────────────────────────────────────┐ │
│  │  创建新 NPC                        │ │
│  │                                    │ │
│  │  名称 *                            │ │
│  │  [输入框________________]          │ │
│  │                                    │ │
│  │  类型 *                            │ │
│  │  ( ) 通用  ( ) 特定                │ │
│  │                                    │ │
│  │  人设描述 *                        │ │
│  │  [多行输入框________________]      │ │
│  │  [________________]                │ │
│  │                                    │ │
│  │  使用模型 *                        │ │
│  │  [下拉选择框▼]                    │ │
│  │                                    │ │
│  │  头像（可选）                      │ │
│  │  [输入 URL] 或 [上传图片]          │ │
│  │                                    │ │
│  │  [取消]  [创建]                    │ │
│  └────────────────────────────────────┘ │
│                                          │
└─────────────────────────────────────────┘
```

#### 交互流程

1. **表单填写**：

   - 实时验证（名称不能为空、不能重复等）
   - 显示验证错误提示

2. **提交表单**：

   - 显示加载状态
   - 调用 API 创建 NPC
   - 成功：跳转到 NPC 列表页
   - 失败：显示错误提示

3. **取消**：
   - 返回 NPC 列表页

---

### 3.3 对话页面

#### 布局结构

```
┌─────────────────────────────────────────┐
│  顶部导航栏                              │
│  [←] [头像] NPC名称                      │
├─────────────────────────────────────────┤
│                                          │
│  ┌────────────────────────────────────┐ │
│  │                                    │ │
│  │  消息列表                          │ │
│  │                                    │ │
│  │  [AI消息] 你好！                   │ │
│  │  [用户消息] 你好，我想学习...      │ │
│  │  [AI消息] 好的，我来帮你...        │ │
│  │                                    │ │
│  └────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│  [输入框________________] [发送]        │
└─────────────────────────────────────────┘
```

#### 交互流程

1. **页面加载**：

   - 显示加载状态
   - 调用 API 获取对话历史
   - 显示历史消息列表
   - 自动滚动到底部

2. **发送消息**：

   - 输入消息内容
   - 点击发送或按 Enter（Shift+Enter 换行）
   - 显示发送中的加载状态
   - 显示用户消息
   - 等待 AI 回复
   - 显示 AI 回复
   - 自动滚动到底部

3. **错误处理**：
   - 发送失败时显示错误提示
   - 允许重试

---

## 4. 交互流程总结

### 4.1 主要用户流程

1. **查看 NPC 列表** → **选择 NPC** → **开始对话**
2. **查看 NPC 列表** → **创建新 NPC** → **返回列表**
3. **对话页面** → **返回列表** → **选择其他 NPC**

### 4.2 页面路由

```
/ - 首页（重定向到 /agents）
/agents - NPC 列表页
/agents/create - 创建 NPC 页
/chat/:agentId - 对话页
```

---

## 5. 组件设计确认

### 5.1 基础组件

- **Button**：按钮组件（主要、次要、危险等类型）
- **Input**：输入框组件（文本、多行）
- **Card**：卡片组件（用于 NPC 卡片）
- **Loading**：加载组件（全屏、内联）

### 5.2 业务组件

- **AgentCard**：NPC 卡片组件
- **MessageBubble**：消息气泡组件

---

## 6. 状态设计

### 6.1 加载状态

- 页面加载：显示全屏加载动画
- 按钮加载：按钮内显示加载图标
- 内联加载：在内容区域显示加载动画

### 6.2 空状态

- NPC 列表为空：显示空状态提示和创建按钮
- 对话历史为空：显示"开始对话"提示

### 6.3 错误状态

- API 错误：显示错误提示，允许重试
- 表单验证错误：在字段下方显示错误信息

---

## 7. 验收标准

- [x] 页面布局设计完成
- [x] 交互流程确定
- [x] 视觉风格确定（基于 UI 设计规范）
- [x] 响应式设计规划完成
- [x] 组件设计确认

---

**文档状态**：✅ 已完成  
**下一步**：选择并安装 UI 组件库（Ant Design）
